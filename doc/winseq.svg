<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="392px" preserveAspectRatio="none" style="width:767px;height:392px;" version="1.1" viewBox="0 0 767 392" width="767px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="370.3828" style="stroke: #A80036; stroke-width: 1.0;" width="183" x="4" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="7" y="17.4951">Originating Process Context</text><rect fill="#DDDDDD" height="370.3828" style="stroke: #A80036; stroke-width: 1.0;" width="487.5" x="243" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="396.75" y="17.4951">File System Process Context</text><rect fill="#FFFFFF" height="22.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="84.5703"/><rect fill="#FFFFFF" height="9" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="362.3828"/><rect fill="#FFFFFF" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="137" y="106.9219"/><rect fill="#FFFFFF" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="268.5" y="137.2734"/><rect fill="#FFFFFF" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="268.5" y="332.0313"/><rect fill="#FFFFFF" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="472.5" y="167.625"/><rect fill="#FFFFFF" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="472.5" y="301.6797"/><rect fill="#FFFFFF" height="103.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="685.5" y="197.9766"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="690.5" y="236.3281"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="63.5" x2="63.5" y1="74.5703" y2="380.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="141.5" x2="141.5" y1="74.5703" y2="380.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="273" x2="273" y1="74.5703" y2="380.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="477" x2="477" y1="74.5703" y2="380.3828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="690.5" x2="690.5" y1="74.5703" y2="380.3828"/><rect fill="#FEFECE" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="22.5" y="24.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="29.5" y="45.8848">Originating</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="38.5" y="63.4941">Process</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="115.5" y="41.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="122.5" y="63.4941">winfsp</text><rect fill="#FEFECE" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="247" y="41.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="254" y="63.4941">winfsp</text><rect fill="#FA8072" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="61" x="447" y="41.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="454" y="63.4941">winfuse</text><rect fill="#FEFECE" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="72" x="654.5" y="24.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="662.5" y="45.8848">Windows</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="661.5" y="63.4941">FUSE FS</text><rect fill="#FFFFFF" height="22.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="84.5703"/><rect fill="#FFFFFF" height="9" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="59" y="362.3828"/><rect fill="#FFFFFF" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="137" y="106.9219"/><rect fill="#FFFFFF" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="268.5" y="137.2734"/><rect fill="#FFFFFF" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="268.5" y="332.0313"/><rect fill="#FFFFFF" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="472.5" y="167.625"/><rect fill="#FFFFFF" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="472.5" y="301.6797"/><rect fill="#FFFFFF" height="103.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="685.5" y="197.9766"/><rect fill="#FFFFFF" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="690.5" y="236.3281"/><polygon fill="#A80036" points="125,102.9219,135,106.9219,125,110.9219,129,106.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="131" y1="106.9219" y2="106.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="71" y="102.0654">I/O</text><polygon fill="#A80036" points="256.5,133.2734,266.5,137.2734,256.5,141.2734,260.5,137.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="142" x2="262.5" y1="137.2734" y2="137.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="149" y="132.417">Context Switch</text><polygon fill="#A80036" points="460.5,163.625,470.5,167.625,460.5,171.625,464.5,167.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="273.5" x2="466.5" y1="167.625" y2="167.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="280.5" y="162.7686">FSP_FSCTL_TRANSACT Req</text><polygon fill="#A80036" points="673.5,193.9766,683.5,197.9766,673.5,201.9766,677.5,197.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="477.5" x2="679.5" y1="197.9766" y2="197.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="484.5" y="193.1201">FUSE_FSCTL_TRANSACT Req</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="700.5" x2="742.5" y1="228.3281" y2="228.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="742.5" x2="742.5" y1="228.3281" y2="241.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="701.5" x2="742.5" y1="241.3281" y2="241.3281"/><polygon fill="#A80036" points="711.5,237.3281,701.5,241.3281,711.5,245.3281,707.5,241.3281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="707.5" y="223.4717">Process</text><polygon fill="#A80036" points="493.5,297.6797,483.5,301.6797,493.5,305.6797,489.5,301.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="487.5" x2="689.5" y1="301.6797" y2="301.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="499.5" y="296.8232">FUSE_FSCTL_TRANSACT Rsp</text><polygon fill="#A80036" points="289.5,328.0313,279.5,332.0313,289.5,336.0313,285.5,332.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="283.5" x2="476.5" y1="332.0313" y2="332.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="295.5" y="327.1748">FSP_FSCTL_TRANSACT Rsp</text><polygon fill="#A80036" points="80,358.3828,70,362.3828,80,366.3828,76,362.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="74" x2="272.5" y1="362.3828" y2="362.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="86" y="357.5264">Context Switch and Return</text><!--MD5=[f3ff612916e48684d13b4e2140ddf283]
@startuml
skinparam shadowing false
hide footbox

box "Originating Process Context"
    participant "Originating\nProcess" as OP
    participant "winfsp" as winfspOP
end box
box "File System Process Context"
    participant "winfsp" as winfspFS
    participant winfuse #Salmon
    participant "Windows\nFUSE FS" as FS
end box

activate OP
OP->winfspOP: I/O
deactivate OP
activate winfspOP
winfspOP- ->winfspFS: Context Switch
deactivate winfspOP
activate winfspFS
winfspFS->winfuse: FSP_FSCTL_TRANSACT Req
deactivate winfspFS
activate winfuse
winfuse->FS: FUSE_FSCTL_TRANSACT Req
deactivate winfuse
activate FS
FS->FS: Process
activate FS
deactivate FS
FS->winfuse: FUSE_FSCTL_TRANSACT Rsp
deactivate FS
activate winfuse
winfuse->winfspFS: FSP_FSCTL_TRANSACT Rsp
deactivate winfuse
activate winfspFS
winfspFS- ->OP: Context Switch and Return
deactivate winfspFS
activate OP

@enduml

PlantUML version 1.2020.10(Sun May 17 02:35:57 PDT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 14.0.2+12
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>